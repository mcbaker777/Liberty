<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Project Liberty â€” Readiness Map</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-padding-top: 170px; }
body { font-family: 'Segoe UI', system-ui, sans-serif; background: #f8fafc; color: #1e293b; min-height: 100vh; overflow-x: auto; }
button { font-family: inherit; }
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: #f1f5f9; }
::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<script type="text/babel">
const { useState, useRef, useCallback, useEffect } = React;

// â”€â”€ Audio â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function useAudio(audioOn) {
  const ctxRef = useRef(null);
  const getCtx = useCallback(() => {
    if (!ctxRef.current) ctxRef.current = new (window.AudioContext || window.webkitAudioContext)();
    if (ctxRef.current.state === 'suspended') ctxRef.current.resume();
    return ctxRef.current;
  }, []);
  const playHover = useCallback(() => {
    if (!audioOn) return;
    try {
      const ctx = getCtx();
      const osc = ctx.createOscillator(), gain = ctx.createGain();
      osc.connect(gain); gain.connect(ctx.destination);
      osc.type = 'sine';
      osc.frequency.setValueAtTime(880, ctx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(1040, ctx.currentTime + 0.06);
      gain.gain.setValueAtTime(0, ctx.currentTime);
      gain.gain.linearRampToValueAtTime(0.04, ctx.currentTime + 0.01);
      gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.09);
      osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.09);
    } catch(e) {}
  }, [audioOn, getCtx]);
  const playClick = useCallback(() => {
    if (!audioOn) return;
    try {
      const ctx = getCtx();
      const osc = ctx.createOscillator(), gain = ctx.createGain();
      osc.connect(gain); gain.connect(ctx.destination);
      osc.type = 'sine';
      osc.frequency.setValueAtTime(520, ctx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(320, ctx.currentTime + 0.1);
      gain.gain.setValueAtTime(0, ctx.currentTime);
      gain.gain.linearRampToValueAtTime(0.07, ctx.currentTime + 0.008);
      gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.14);
      osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.14);
    } catch(e) {}
  }, [audioOn, getCtx]);
  return { playHover, playClick };
}

// â”€â”€ Speech â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function useSpeech(audioOn) {
  const [speaking, setSpeaking] = useState(false);
  const stop = useCallback(() => {
    window.speechSynthesis.cancel();
    setSpeaking(false);
  }, []);
  const speak = useCallback((text) => {
    if (!audioOn || !text) return;
    window.speechSynthesis.cancel();
    const utt = new SpeechSynthesisUtterance(text);
    utt.rate = 0.95;
    utt.pitch = 1.0;
    utt.volume = 1.0;
    // Prefer a natural-sounding voice
    const voices = window.speechSynthesis.getVoices();
    const preferred = voices.find(v =>
      v.name.includes('Samantha') || v.name.includes('Karen') ||
      v.name.includes('Daniel') || v.name.includes('David') ||
      v.name.includes('Google US') || v.name.includes('Microsoft Aria')
    );
    if (preferred) utt.voice = preferred;
    utt.onstart  = () => setSpeaking(true);
    utt.onend    = () => setSpeaking(false);
    utt.onerror  = () => setSpeaking(false);
    window.speechSynthesis.speak(utt);
  }, [audioOn]);
  useEffect(() => { if (!audioOn) stop(); }, [audioOn, stop]);
  return { speak, stop, speaking };
}

// â”€â”€ Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PHASES_D1 = [
  { id:"target",    label:"Targeting",    dates:"Now â†’ Feb 28",   accent:"#2563eb" },
  { id:"mobilize",  label:"Mobilization", dates:"Mar 1 â†’ Mar 31", accent:"#7c3aed" },
  { id:"readiness", label:"Readiness",    dates:"Apr 1 â†’ Apr 30", accent:"#d97706" },
  { id:"exec",      label:"âš¡ Day-1",      dates:"May 1 + 72hrs",  accent:"#dc2626" },
];
const PHASES_TSA = [
  { id:"stabilize", label:"Stabilize",  dates:"D-1 â†’ Month 2", accent:"#059669" },
  { id:"enable",    label:"Enable",     dates:"Month 2 â†’ 4",   accent:"#0891b2" },
  { id:"migrate",   label:"Migrate",    dates:"Month 4 â†’ 6",   accent:"#0369a1" },
  { id:"exit",      label:"âœ“ TSA Exit", dates:"~Month 6",      accent:"#047857" },
];
const STATUS = {
  red:   { bg:"rgba(220,38,38,0.08)",   text:"#dc2626", border:"rgba(220,38,38,0.3)",   label:"Critical" },
  amber: { bg:"rgba(217,119,6,0.08)",   text:"#b45309", border:"rgba(217,119,6,0.3)",   label:"At Risk"  },
  green: { bg:"rgba(5,150,105,0.08)",   text:"#047857", border:"rgba(5,150,105,0.3)",   label:"On Track" },
  blue:  { bg:"rgba(37,99,235,0.07)",   text:"#1d4ed8", border:"rgba(37,99,235,0.25)",  label:"Planned"  },
  gray:  { bg:"rgba(100,116,139,0.07)", text:"#64748b", border:"rgba(100,116,139,0.2)", label:"Deferred" },
};
const LANES = [
  { id:"ocm",       label:"OCM / Comms",          accent:"#7c3aed" },
  { id:"training",  label:"Training & Enablement", accent:"#0891b2" },
  { id:"identity",  label:"Identity & Access",     accent:"#dc2626" },
  { id:"workplace", label:"Workplace / Google",    accent:"#d97706" },
  { id:"apps",      label:"Corporate Apps",        accent:"#059669" },
  { id:"infra",     label:"Infrastructure",        accent:"#4f46e5" },
  { id:"support",   label:"Support (iCare)",       accent:"#db2777" },
  { id:"hr",        label:"HR / People & Org",     accent:"#ea580c" },
];

const TASKS_D1 = {
  ocm:{
    target:[
      {label:"ðŸš¨ Confirm Day-1 Date", status:"red",
       detail:"Day-1 confirmed as May 1, 2026. All procurement, printing, and staffing timelines should now be anchored to this date. Verify all workstream leads have updated their plans accordingly.",
       voiceover:"Day 1 is confirmed for May 1st, 2026. This is the anchor date for every downstream dependency in the integration â€” procurement, printing, staffing, and training schedules all run backward from this point. Every workstream lead should now have this date locked in their plans. If anyone is still working from a provisional date, that needs to be corrected immediately."},
      {label:"Lock MVEE Definition", status:"amber",
       detail:"Define binary Day-1 success: Can I log in? Can I reach my apps? Do I know who to call? Get Paul/Marc sign-off to prevent scope creep.",
       voiceover:"The MVEE â€” Minimum Viable Employee Experience â€” defines what Day 1 success actually means for a Clean Earth employee. It comes down to three binary questions. Can I log in? Can I reach my Day 1 applications? And do I know who to call if something goes wrong? Getting sign-off from Paul and Marc on this definition is critical. Without it, the scope of Day 1 support will expand in unpredictable ways as we get closer to close."},
    ],
    mobilize:[
      {label:"Manager Cascade Pack", status:"blue",
       detail:"Scripted talking points for site managers. Core message: 'This change is permanent.' Counters the Suez middle-manager pocket veto. Due 2 weeks before close.",
       voiceover:null},
      {label:"Integration Narrative", status:"blue",
       detail:"Draft the Change Story â€” the strategic why behind the integration. Aligns once Cecilia locks the Day-1 Target Operating Model.",
       voiceover:null},
    ],
    readiness:[
      {label:"Suez Leadership Deck", status:"amber",
       detail:"7 Suez lessons â†’ concrete leadership actions for Marc. Each slide = one decision required. In progress.",
       voiceover:"The Suez Leadership Deck translates the seven key lessons from the Suez integration into concrete decisions that Marc needs to make before Day 1. This is not a lessons-learned retrospective â€” it is a forward-looking decision brief. Each slide presents one lesson, one risk, and one leadership action required. It is currently in progress and needs to be completed before the next SteerCo touchpoint."},
      {label:"Go/No-Go Brief", status:"blue",
       detail:"Evidence-based SteerCo brief: CIA completion %, MVEE checklist, Heat Map color, War Room staffed Y/N.",
       voiceover:null},
    ],
    exec:[
      {label:"2Ã— Daily Pulse Checks", status:"amber",
       detail:"8AM / 4PM stand-ups in Command Center. OCM updates Single Front Door FAQ in real-time based on top 3 ticket types.",
       voiceover:"During the Day 1 execution window, the OCM team will run two stand-ups daily inside the Command Center â€” at 8 AM and 4 PM. The primary purpose is to identify the top three emerging issues from the support queue and update the Single Front Door FAQ in real time. This is how we prevent small problems from becoming rumors, and rumors from becoming resistance."},
      {label:"Rumor Control Active", status:"blue",
       detail:"Monitor for 'wait it out' behavior. Deploy manager cascade reinforcement if field resistance spikes.",
       voiceover:null},
    ],
  },
  training:{
    target:[
      {label:"CIA Training Scope Map", status:"green",
       detail:"Completed. Each CIA entry mapped to modality: self-service QRG, virtual, or in-person. Priority order confirmed: Google WS (all users), MFA (all users), SAP/Ariba (Finance/Procurement). Matt Baker functioning as Training Coordinator â€” dedicated external resource no longer required.",
       voiceover:null},
    ],
    mobilize:[
      {label:"KoP Hub Setup", status:"blue",
       detail:"Secure King of Prussia training room for 100+ users. Reserve 50 Chromebooks from TracyAnn bulk order. Hotel conference room as contingency.",
       voiceover:null},
      {label:"Google WS Curriculum", status:"blue",
       detail:"Coordinate with Heather Summers + 4 external Google Partner trainers. Validate SOW includes Day-1 floor-walking, not just classroom instruction.",
       voiceover:null},
      {label:"Day-1 Survival Kit", status:"blue",
       detail:"1-page printable: MFA steps, Gmail login, iCare number, QR code. Will incorporate Login Cheat Sheet. Must work for both digital and non-digital field users.",
       voiceover:null},
    ],
    readiness:[
      {label:"Login Cheat Sheet (3-pwd)", status:"blue",
       detail:"3-password confusion guide: Legacy Laptop â†’ Entra ID â†’ Gmail. Will be incorporated into the Day-1 Survival Kit. Must be tested by non-IT users before print.",
       voiceover:null},
      {label:"War Room Bootcamp", status:"blue",
       detail:"2-hour training for 50 volunteer Champions. Covers MFA flow, Gmail login, iCare escalation path. No technical expertise required.",
       voiceover:null},
    ],
    exec:[
      {label:"Live Training at KoP + Sites", status:"green",
       detail:"Physical presence at King of Prussia confirmed. Matt + Emily + Sophia on-site. Google Partner trainers running virtual tracks simultaneously.",
       voiceover:null},
    ],
  },
  identity:{
    target:[
      {label:"CIA Cyber Capacity", status:"amber",
       detail:"Validated 2/6 with Taylor Paich: Day-1 is Assessment, not Enforcement. Do NOT strip admin rights Day-1. 25% Cyber workload increase with zero new headcount â€” capacity risk actively monitored.",
       voiceover:"The cybersecurity posture for Day 1 has been validated with Taylor Paich. The confirmed approach is Assessment, not Enforcement. Admin rights will not be stripped on Day 1 â€” that is a deliberate risk mitigation decision. However, there is a real capacity concern: the Cyber team is absorbing a twenty-five percent workload increase with zero new headcount. This is being actively monitored and is a potential bottleneck if provisioning volume spikes unexpectedly."},
    ],
    mobilize:[
      {label:"Provisioning Plan (2,500)", status:"blue",
       detail:"Define provisioning schedule for CE users into Veolia Okta/Entra ID. Priority: Day-1 critical roles first â€” Finance leads, Site Managers, IT staff.",
       voiceover:null},
      {label:"MFA Enrollment Strategy", status:"blue",
       detail:"Self-serve vs. IT pre-enroll decision. Manager Password Handover model as zero-IT-literacy fallback.",
       voiceover:null},
    ],
    readiness:[
      {label:"Merger Phishing Training", status:"blue",
       detail:"Mandatory pre-close module: M&A-specific phishing threats. Migrates to Riot platform from legacy Enviri tooling.",
       voiceover:null},
      {label:"Endpoint Agent Deploy", status:"blue",
       detail:"Install Veolia EDR agents on CE devices â€” Assessment only, no policy enforcement yet.",
       voiceover:null},
    ],
    exec:[
      {label:"Identity Embed in War Room", status:"blue",
       detail:"Cyber team member embedded in Command Center. Direct line to Cyber if user cannot authenticate.",
       voiceover:null},
    ],
  },
  workplace:{
    target:[
      {label:"ðŸš¨ Chromebook Procurement", status:"red",
       detail:"100 Chromebook bulk order in progress; 50 ring-fenced for KoP. BLOCKED: No validated site list prevents distribution planning.",
       voiceover:"Chromebook procurement is currently blocked. One hundred units are on order with fifty reserved for the King of Prussia training hub, but distribution planning cannot proceed until we have a validated site list. Without confirmed headcounts for all 88 Clean Earth locations, we cannot determine how many devices go where, or which sites need physical training support versus self-service kiosks. The site list is the upstream dependency that is holding this back."},
      {label:"CIA Workplace Tab", status:"amber",
       detail:"CE is full Microsoft 365. Google Shock confirmed 2/11. Users get @veolia.com email Day-1. Auto-forwarding from legacy addresses must be validated.",
       voiceover:"The workplace change impact for Clean Earth employees is significant. They are currently a fully Microsoft 365 organization and will move to Google Workspace on Day 1. We have formally identified this as a Google Shock scenario. Every Clean Earth employee will receive a new Veolia dot com email address on Day 1, and auto-forwarding from their legacy addresses must be validated before close. This is one of the highest-volume user experience risks in the entire integration."},
    ],
    mobilize:[
      {label:"Mousepad Procurement", status:"blue",
       detail:"Printed mousepads with iCare number for every CE user. 30-day lead time.",
       voiceover:null},
      {label:"Self-Service Kiosk Design", status:"blue",
       detail:"TracyAnn designing kiosk solution for sites without physical training presence.",
       voiceover:null},
    ],
    readiness:[
      {label:"Device Readiness Test", status:"blue",
       detail:"Validate Day-1 device experience end-to-end: Chromebook imaging, legacy laptop status, Intune enrollment.",
       voiceover:null},
    ],
    exec:[
      {label:"Fleet & Kiosks LIVE", status:"green",
       detail:"Training fleet deployed at KoP and hub sites. All devices tested with Day-1 login flow.",
       voiceover:null},
    ],
  },
  apps:{
    target:[
      {label:"âš  Day-1 vs. TSA Scope", status:"amber",
       detail:"Must confirm with Vamsi: SAP on Legal Day-1 (April) or TSA Exit (October)? If April, training window collapses to 8 weeks.",
       voiceover:"There is an unresolved scope question for Corporate Applications that has direct training timeline implications. We need to confirm with Vamsi whether SAP goes live on Legal Day 1 in April, or whether it is scoped to the TSA Exit in October. If the answer is April, the available training window collapses from six months to roughly eight weeks. That is a fundamentally different resourcing and sequencing problem, and we cannot finalize the Corporate Apps training plan until this decision is made."},
      {label:"App Owner Outreach", status:"blue",
       detail:"Emails sent to Vamsi, Cindy Solomon, Stephanie Grubis, Brett and Karen, and Jeff.",
       voiceover:null},
    ],
    mobilize:[
      {label:"Ariba/Concur Trainer Kickoff", status:"blue",
       detail:"Trainer kickoff in progress. Confirm SOW covers CE-specific workflows.",
       voiceover:null},
      {label:"Workday Ownership Confirm", status:"amber",
       detail:"Awaiting written confirmation from Cecilia that HR owns Workday training end-to-end.",
       voiceover:"We are waiting on written confirmation from Cecilia that HR owns the Workday training program end to end â€” including content development, logistics, and delivery. An email has been sent with a deadline of end of week. Until we have that confirmation in writing, there is a budget and accountability gap in the training plan. If HR does not formally accept ownership, the DB&T OCM team will need to carry a placeholder for Workday training resources."},
    ],
    readiness:[
      {label:"SAP Role Mapping (Day-2+)", status:"gray",
       detail:"Map CE finance/procurement roles to Veolia SAP T-Codes. Cannot train until complete.",
       voiceover:null},
      {label:"Concur Mobile Guide", status:"gray",
       detail:"Self-service QRG for Concur mobile app setup.",
       voiceover:null},
    ],
    exec:[
      {label:"Day-1 App Access Live", status:"gray",
       detail:"Confirm Concur, Ariba view-only, and Day-1 corporate app access provisioned before 8AM Day-1.",
       voiceover:null},
    ],
  },
  infra:{
    target:[
      {label:"CIA Infra Tab (Elena)", status:"blue",
       detail:"Validate connectivity assumptions with Elena Navarette. Key: VPN login on Day-1? Legacy apps accessible during TSA.",
       voiceover:null},
    ],
    mobilize:[
      {label:"âš  Tech Liaison Appointment", status:"amber",
       detail:"Suez lesson: dedicate an Infrastructure/Security liaison to partner with CE IT lead. OCM cannot own this â€” must come from technical leadership.",
       voiceover:"One of the clearest lessons from the Suez integration is that the absence of a dedicated technical liaison created significant friction between the incoming IT team and the acquiring organization. We need a named Infrastructure and Security liaison from the Veolia side to formally partner with the Clean Earth IT lead through the TSA window. This is not something OCM can own â€” it must be assigned by technical leadership. It is currently unassigned."},
      {label:"Network Bridge Validation", status:"blue",
       detail:"Confirm CE-Veolia network connectivity. FoxPro and 4D legacy apps must remain accessible during TSA.",
       voiceover:null},
    ],
    readiness:[
      {label:"Remote Access Testing", status:"blue",
       detail:"End-to-end test: CE user, legacy laptop, new Veolia VPN. Identify sites requiring manual intervention.",
       voiceover:null},
    ],
    exec:[
      {label:"Network Bridge LIVE", status:"green",
       detail:"CE-Veolia bridge active. Legacy applications accessible via new Veolia credentials.",
       voiceover:null},
    ],
  },
  support:{
    target:[
      {label:"ðŸš¨ Validated Site List", status:"red",
       detail:"CRITICAL BLOCKER: No validated site list with headcounts. Blocks mousepad ordering, Welcome Committee targeting, Heat Zone tiering, War Room routing. Must come from Deloitte/Marine.",
       voiceover:"The validated site list is the single most consequential open dependency in the entire Day 1 plan. Without confirmed headcounts for all 88 Clean Earth locations, four separate workstreams are blocked: mousepad procurement cannot be fulfilled, Welcome Committee deployment cannot be targeted, Heat Zone tiering cannot be assigned, and War Room routing logic cannot be built. This item must come from Deloitte or Marine Rodriguez. Until it is received, these downstream activities remain on hold."},
      {label:"Ed Cacho Meeting (iCare)", status:"amber",
       detail:"Define persistent Google Meet bridge structure, IVR dedicated CE queue, and rapid pulse reporting every 2 hrs. iCare is -40% staffed.",
       voiceover:"The iCare support model for Day 1 needs to be formally defined with Ed Cacho. Three specific design decisions are outstanding: the structure of the persistent Google Meet bridge, the configuration of a dedicated Clean Earth queue in the IVR, and the cadence for pulse reporting during the execution window. There is also a significant staffing concern â€” iCare is currently running at roughly sixty percent of its normal capacity, which means the Day 1 support load needs to be carefully managed to avoid overwhelming the service desk."},
    ],
    mobilize:[
      {label:"Recruit Volunteer Army (50)", status:"blue",
       detail:"Recruit Google Champions to staff Day-1 Virtual Bridge. 2-hour Bootcamp required.",
       voiceover:null},
      {label:"Single Front Door Portal", status:"blue",
       detail:"Stand up dedicated URL: MFA Setup, Gmail Access, Get Help, FAQ.",
       voiceover:null},
    ],
    readiness:[
      {label:"IVR Configuration", status:"blue",
       detail:"Configure iCare IVR: dedicated Clean Earth Day-1 option.",
       voiceover:null},
      {label:"Heat Zone Tiering (88 sites)", status:"blue",
       detail:"T1 over 50 staff: Welcome Committee. T2 10 to 50: Manager Box. T3 under 10: Digital plus wallet cards.",
       voiceover:null},
    ],
    exec:[
      {label:"âš¡ Command Center 48hr Live", status:"amber",
       detail:"Persistent Google Meet bridge, 48 continuous hours. 50 volunteers plus Cyber embed plus OCM Lead.",
       voiceover:"The Command Center is the operational nerve center for Day 1. It runs as a persistent Google Meet bridge for 48 continuous hours beginning at close. Fifty volunteer Power Users are embedded alongside the Cyber team representative and the OCM lead. The escalation path runs from the self-service portal at Level 0, through the bridge at Level 1, to iCare at Level 2, and to the workstream lead at Level 3 for unresolved issues. Pulse reports go out every two hours throughout the execution window."},
    ],
  },
  hr:{
    target:[
      {label:"Workday Ownership Pending", status:"amber",
       detail:"Email sent to Cecilia: HR owns Workday content, logistics, and delivery. Awaiting written confirmation.",
       voiceover:"HR ownership of the Workday training program is currently pending written confirmation from Cecilia. The DB&T OCM team's position is that HR owns the tHRive content, logistics, and delivery end to end. An email has been sent. If confirmation is not received by end of week, the DB&T budget will need to include a placeholder for Workday training resources to avoid a coverage gap. This is a time-sensitive accountability item."},
      {label:"Critical Talent Retention", status:"blue",
       detail:"FoxPro and 4D SMEs are flight risks. OCM feeds specific IT names to Cecilia retention list.",
       voiceover:null},
    ],
    mobilize:[
      {label:"Day-1 Org Chart Lock", status:"blue",
       detail:"Cecilia owns the Day-1 Target Operating Model. OCM needs this locked to build the Change Story.",
       voiceover:null},
      {label:"Welcome Packet (HR + IT)", status:"blue",
       detail:"OCM requests insertion of Day-1 Digital Essentials 1-pager into HR Welcome Packet.",
       voiceover:null},
    ],
    readiness:[
      {label:"Manager Script Delivery", status:"blue",
       detail:"HR and OCM co-deliver This is Permanent script to site managers 1 week before close.",
       voiceover:null},
    ],
    exec:[
      {label:"HR Support Active", status:"green",
       detail:"Bill Agostini and Lauren deployed in parallel with IT Command Center.",
       voiceover:null},
    ],
  },
};

const TASKS_TSA = {
  ocm:{
    stabilize:[{label:"Hypercare Dashboard", status:"amber",
      detail:"Live readiness dashboard: ticket volume, adoption %, open RAID items. Updated daily during Hypercare.",
      voiceover:"The Hypercare Dashboard is the primary situational awareness tool for the thirty days following Day 1. It tracks ticket volume by category, adoption percentages by application, and open RAID items in real time. It is updated daily and shared with workstream leads as the primary signal for where support resources need to be redirected. If ticket volume in any category spikes, this is the tool that triggers a targeted response."}],
    enable:[
      {label:"TSA Exit Change Story", status:"blue", detail:"Narrative: why SAP and Workday adoption matters for TSA Exit.", voiceover:null},
      {label:"Culture Integration Pulse", status:"blue", detail:"5-question pulse survey at Month 2.", voiceover:null},
    ],
    migrate:[{label:"Cutover Comms Package", status:"blue", detail:"What changes, when, who to call. Distributed 2 weeks before SAP cutover.", voiceover:null}],
    exit:[{label:"BAU Handoff + Close-Out", status:"green", detail:"OCM formally hands off to operational management. Lessons learned documented.", voiceover:null}],
  },
  training:{
    stabilize:[
      {label:"Google WS Phase 2", status:"amber",
       detail:"Advanced Google Workspace: Drive collaboration, Meet, Calendar sharing.",
       voiceover:"Google Workspace Phase 2 builds on the Day 1 survival training to develop genuine proficiency across the platform. The focus shifts from basic login and email to collaborative features: shared Drive governance, Meet for team coordination, and Calendar integration. This phase is particularly important for team leads and site managers who need to model the new ways of working for their direct reports."},
      {label:"Competency Baseline Survey", status:"blue", detail:"Measure post-Day-1 proficiency by user segment.", voiceover:null},
    ],
    enable:[
      {label:"SAP Power User Bootcamp", status:"blue", detail:"Role-based SAP training. Requires sandbox with CE data and role mapping complete.", voiceover:null},
      {label:"Ariba Train-the-Trainer", status:"blue", detail:"Train Veolia Procurement leads to cascade to 500 plus CE requisitioners.", voiceover:null},
      {label:"Concur Self-Service Rollout", status:"blue", detail:"Mobile app guide for traveling employees.", voiceover:null},
    ],
    migrate:[{label:"Month-End Close Simulation", status:"amber",
      detail:"Critical risk: first month-end close in SAP must not fail. Run full simulation before go-live.",
      voiceover:"The first month-end close in SAP is one of the highest-risk milestones in the entire TSA Exit. Finance teams will be executing critical reconciliation and reporting processes in an unfamiliar system under real business pressure. A full simulation using the CE data sandbox must be completed before go-live. If the simulation identifies gaps, there is still time to remediate. If it is skipped and problems emerge during the actual close, the business impact could be significant."}],
    exit:[{label:"Time-to-Competency Validated", status:"green", detail:"Confirm CE users can independently transact in SAP, Ariba, and Concur.", voiceover:null}],
  },
  identity:{
    stabilize:[{label:"Admin Rights Assessment Wv1", status:"amber",
      detail:"Structured review of CE IT admin rights. Assess, document, plan remediation. No enforcement yet.",
      voiceover:"Wave 1 of the admin rights assessment is a structured review of the elevated access held by Clean Earth IT staff. The approach is assess, document, and plan â€” not enforce. No access is being removed at this stage. The goal is to build a complete picture of the current state so that the remediation plan in the Enable phase is accurate and targeted. This is also an important trust-building step with the CE IT team, who need to understand the process before any changes are made."}],
    enable:[
      {label:"Privileged Access Remediation", status:"blue", detail:"Apply Veolia PAM standards to CE IT staff.", voiceover:null},
      {label:"Admin Rights Change Messaging", status:"blue", detail:"OCM narrative: why access controls are changing and what CE IT staff retain.", voiceover:null},
    ],
    migrate:[{label:"Veolia Cyber Standards Full", status:"blue", detail:"CE fully aligned to Veolia Global Cyber Standards.", voiceover:null}],
    exit:[{label:"Full IAM Compliance âœ“", status:"green", detail:"All CE users operating within Veolia identity governance.", voiceover:null}],
  },
  workplace:{
    stabilize:[{label:"Microsoft Decommission Plan", status:"amber",
      detail:"Define timeline for O365 license wind-down. Dependency: all users verified in Google Workspace first.",
      voiceover:"The Microsoft 365 decommission plan defines the staged timeline for removing O365 licenses from Clean Earth users as their Google Workspace adoption is confirmed. This cannot proceed until we have verification that users are genuinely operational in Google â€” not just provisioned, but actively using it. Pulling O365 too early creates a productivity risk. The plan needs to be built segment by segment, starting with the highest-adoption user groups and working toward the laggards."}],
    enable:[
      {label:"O365 License Wind-Down", status:"blue", detail:"Staged removal of Microsoft 365 licenses as Google adoption is confirmed.", voiceover:null},
      {label:"Advanced Google WS Features", status:"blue", detail:"Drive sharing governance, Shared Drives, Meet recording policies.", voiceover:null},
    ],
    migrate:[{label:"Legacy Device Refresh", status:"blue", detail:"Replace remaining CE legacy devices with Veolia-standard endpoints.", voiceover:null}],
    exit:[{label:"Full Google WS Adoption âœ“", status:"green", detail:"Microsoft O365 fully decommissioned.", voiceover:null}],
  },
  apps:{
    stabilize:[
      {label:"SAP Data Migration Prep", status:"blue", detail:"CE legacy financial data mapped and validated for SAP migration.", voiceover:null},
      {label:"Workday Go-Live (tHRive)", status:"blue", detail:"HR-led Workday go-live with CE population.", voiceover:null},
    ],
    enable:[
      {label:"SAP Power User Training", status:"blue", detail:"Role-based SAP training by module.", voiceover:null},
      {label:"Ariba + BlackLine Adoption", status:"blue", detail:"Procurement and Finance compliance tools fully adopted.", voiceover:null},
    ],
    migrate:[
      {label:"âš  Month-End Close in SAP", status:"amber",
       detail:"First month-end close is the highest-risk SAP milestone. Pre-simulation required.",
       voiceover:"The first month-end close in SAP is the single highest-risk event in the Corporate Applications workstream. It combines an unfamiliar system, real financial data, and a hard deadline that cannot slip. Claude Scher has flagged this as a critical failure point. A full pre-simulation using CE data is mandatory before the go-live date. The simulation should replicate the actual close process as closely as possible, including the approval workflows and reporting outputs that Finance leadership expects to see."},
      {label:"Cutover Freeze Comms", status:"blue", detail:"Communicate blackout period before SAP go-live.", voiceover:null},
    ],
    exit:[{label:"SAP Go-Live + TSA Exit âœ“", status:"green", detail:"CE Finance fully transacting in SAP S/4HANA.", voiceover:null}],
  },
  infra:{
    stabilize:[{label:"Legacy System Inventory", status:"blue", detail:"Full inventory of FoxPro and 4D systems.", voiceover:null}],
    enable:[
      {label:"FoxPro/4D Knowledge Transfer", status:"blue", detail:"Structured KT sessions with CE legacy SMEs before role transitions.", voiceover:null},
      {label:"Azure/AWS Architecture Align", status:"blue", detail:"Backend infrastructure alignment with Len De La Cruz.", voiceover:null},
    ],
    migrate:[{label:"Legacy Decommission Planning", status:"blue", detail:"Define sunset timeline for CE legacy infrastructure.", voiceover:null}],
    exit:[{label:"Infra on Veolia Stack âœ“", status:"green", detail:"All CE infrastructure migrated to Veolia standard environments.", voiceover:null}],
  },
  support:{
    stabilize:[{label:"Hypercare Period (30 days)", status:"amber",
      detail:"Extended support posture: War Room scales from 48hr to business hours. Ticket volume monitored daily.",
      voiceover:"The Hypercare period extends the elevated support posture for thirty days beyond Day 1. The Command Center scales back from continuous operation to standard business hours, but the monitoring intensity remains high. Ticket volume is tracked daily by category, and the FAQ portal is updated in real time as new issues emerge. The goal is to identify and close any support gaps before Clean Earth employees are fully transitioned to the standard iCare model."}],
    enable:[
      {label:"Transition to Standard iCare", status:"blue", detail:"CE users fully routed to standard iCare processes.", voiceover:null},
      {label:"Ticket Trend Analysis", status:"blue", detail:"OCM reviews ticket categories to identify persistent training gaps.", voiceover:null},
    ],
    migrate:[{label:"FAQ Portal TSA Phase Update", status:"blue", detail:"Single Front Door updated with TSA-phase content.", voiceover:null}],
    exit:[{label:"CE Support Fully BAU âœ“", status:"green", detail:"CE employees indistinguishable from Veolia BAU users in iCare.", voiceover:null}],
  },
  hr:{
    stabilize:[{label:"Post-D1 Org Comms", status:"blue", detail:"HR communicates org structure changes post-close.", voiceover:null}],
    enable:[
      {label:"Role Harmonization", status:"blue", detail:"CE job titles and grades mapped to Veolia equivalents.", voiceover:null},
      {label:"Culture Integration Survey", status:"blue", detail:"Month 3 pulse: belonging, clarity of expectations, confidence in tools.", voiceover:null},
    ],
    migrate:[{label:"Performance Cycle Alignment", status:"blue", detail:"CE employees onboarded to Veolia performance management cycle in Workday.", voiceover:null}],
    exit:[{label:"HR Processes on Workday âœ“", status:"green", detail:"All CE HR processes fully operational in Workday.", voiceover:null}],
  },
};

// â”€â”€ App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function App() {
  const [view, setView]           = useState("d1");
  const [selected, setSelected]   = useState(null);
  const [focusLane, setFocusLane] = useState(null);
  const [audioOn, setAudioOn]     = useState(true);
  const { playHover, playClick }  = useAudio(audioOn);
  const { speak, stop, speaking } = useSpeech(audioOn);

  const phases = view === "d1" ? PHASES_D1 : PHASES_TSA;
  const tasks  = view === "d1" ? TASKS_D1  : TASKS_TSA;

  const criticalCount = LANES.reduce((acc, lane) =>
    acc + Object.values(tasks[lane.id] || {}).flat().filter(t => t.status === "red").length, 0);

  const handleSelectTask = (taskObj, lane, phase, idx) => {
    playClick();
    const isSel = selected && selected.lane === lane && selected.phase === phase && selected.idx === idx;
    if (isSel) {
      setSelected(null);
      stop();
    } else {
      setSelected({ lane, phase, idx, task: taskObj });
      if (taskObj.voiceover) speak(taskObj.voiceover);
      else stop();
    }
  };

  const T = {
    bg:"#f8fafc", bgSidebar:"#f1f5f9", bgHeader:"#ffffff",
    bgGrid:"#ffffff", bgPhaseHdr:"#ffffff", border:"#e2e8f0",
    text:"#1e293b", textMuted:"#64748b", textFaint:"#94a3b8",
    rowAlt:"#f8fafc", laneLabel:"#f1f5f9",
  };

  return (
    <div style={{fontFamily:"'Segoe UI',system-ui,sans-serif", background:T.bg, minHeight:"100vh", color:T.text}}>

      {/* â”€â”€ Main Header â”€â”€ */}
      <div style={{
        position:"sticky", top:0, zIndex:100,
        background:T.bgHeader, borderBottom:`1px solid ${T.border}`,
        boxShadow:"0 1px 4px rgba(0,0,0,0.06)",
        display:"flex", alignItems:"center", justifyContent:"space-between",
        padding:"0 24px", height:60,
      }}>
        <div style={{display:"flex", alignItems:"center", gap:12}}>
          <div style={{
            width:34, height:34, borderRadius:8,
            background:"linear-gradient(135deg,#7c3aed,#2563eb)",
            display:"flex", alignItems:"center", justifyContent:"center",
            fontSize:12, fontWeight:700, color:"white",
          }}>PL</div>
          <div>
            <div style={{fontSize:14, fontWeight:700, color:T.text}}>Project Liberty â€” Readiness Map</div>
            <div style={{fontSize:11, color:T.textMuted}}>Veolia / Clean Earth Â· DB&T OCM Â· v2.18.26</div>
          </div>
        </div>
        <div style={{display:"flex", alignItems:"center", gap:10}}>
          {criticalCount > 0 && (
            <div style={{
              display:"flex", alignItems:"center", gap:6,
              background:"rgba(220,38,38,0.07)", border:"1px solid rgba(220,38,38,0.2)",
              borderRadius:6, padding:"4px 10px", fontSize:11, color:"#dc2626",
            }}>
              <span style={{width:6, height:6, borderRadius:"50%", background:"#dc2626", display:"inline-block"}}/>
              {criticalCount} Critical Blockers
            </div>
          )}
          {/* Audio toggle */}
          <button
            onClick={() => { if (audioOn) stop(); setAudioOn(!audioOn); }}
            title={audioOn ? "Mute audio & voiceovers" : "Enable audio & voiceovers"}
            style={{
              display:"flex", alignItems:"center", gap:6,
              padding:"5px 12px", borderRadius:7, cursor:"pointer",
              border:`1px solid ${T.border}`,
              background: audioOn ? "rgba(37,99,235,0.07)" : T.bgSidebar,
              color: audioOn ? "#2563eb" : T.textMuted,
              fontSize:12, fontWeight:600, transition:"all 0.15s",
            }}>
            <span style={{fontSize:15}}>{audioOn ? "ðŸ”Š" : "ðŸ”‡"}</span>
            <span>{audioOn ? "Audio On" : "Audio Off"}</span>
          </button>
        </div>
      </div>

      {/* â”€â”€ Body â”€â”€ */}
      <div style={{display:"flex", alignItems:"flex-start"}}>

        {/* â”€â”€ Sidebar â”€â”€ */}
        <div style={{
          width:188, flexShrink:0, background:T.bgSidebar,
          borderRight:`1px solid ${T.border}`, padding:"18px 0",
          position:"sticky", top:60,
          height:"calc(100vh - 60px)", overflowY:"auto",
        }}>
          <div style={{padding:"0 14px 14px"}}>
            <div style={{display:"flex", alignItems:"center", justifyContent:"space-between", marginBottom:8}}>
              <div style={{fontSize:9, fontWeight:700, letterSpacing:"0.1em", textTransform:"uppercase", color:T.textMuted}}>Swimlanes</div>
              {focusLane && (
                <div onClick={() => { setFocusLane(null); playClick(); }} onMouseEnter={() => playHover()}
                  style={{fontSize:10, fontWeight:600, color:"#2563eb", cursor:"pointer",
                    background:"rgba(37,99,235,0.08)", border:"1px solid rgba(37,99,235,0.2)",
                    borderRadius:4, padding:"2px 7px", transition:"all 0.15s"}}>
                  Show All âœ•
                </div>
              )}
            </div>
            {LANES.map(lane => (
              <div key={lane.id}
                onClick={() => { setFocusLane(focusLane === lane.id ? null : lane.id); playClick(); }}
                onMouseEnter={() => playHover()}
                style={{display:"flex", alignItems:"center", gap:8, padding:"5px 8px",
                  borderRadius:5, cursor:"pointer", marginBottom:2,
                  background: focusLane === lane.id ? "rgba(255,255,255,0.9)" : "transparent",
                  opacity: focusLane && focusLane !== lane.id ? 0.35 : 1,
                  transition:"all 0.15s"}}>
                <div style={{width:8, height:8, borderRadius:2, background:lane.accent, flexShrink:0}}/>
                <span style={{fontSize:12, color:T.text, fontWeight: focusLane === lane.id ? 700 : 400}}>{lane.label}</span>
              </div>
            ))}
          </div>
          <div style={{height:1, background:T.border, margin:"4px 14px 14px"}}/>
          <div style={{padding:"0 14px 14px"}}>
            <div style={{fontSize:9, fontWeight:700, letterSpacing:"0.1em", textTransform:"uppercase", color:T.textMuted, marginBottom:8}}>Status</div>
            {Object.entries(STATUS).map(([k,v]) => (
              <div key={k} style={{display:"flex", alignItems:"center", gap:7, marginBottom:6}}>
                <div style={{width:8, height:8, borderRadius:2, background:v.bg, border:`1px solid ${v.border}`, flexShrink:0}}/>
                <span style={{fontSize:12, color:T.text}}>{v.label}</span>
              </div>
            ))}
          </div>
          <div style={{height:1, background:T.border, margin:"4px 14px 14px"}}/>
          <div style={{padding:"0 14px"}}>
            <div style={{fontSize:9, fontWeight:700, letterSpacing:"0.1em", textTransform:"uppercase", color:T.textMuted, marginBottom:8}}>Key Dates</div>
            {(view === "d1" ? [
              {code:"NOW", val:"Feb 18, 2026", c:"#2563eb"},
              {code:"MOB", val:"Mar 1â€“31",     c:"#7c3aed"},
              {code:"RDY", val:"Apr 1â€“30",     c:"#d97706"},
              {code:"D-1", val:"May 1, 2026",  c:"#dc2626"},
            ] : [
              {code:"Mo1", val:"Post-close stabilize", c:"#059669"},
              {code:"Mo2", val:"Core enablement",      c:"#0891b2"},
              {code:"Mo4", val:"Migration prep",       c:"#0369a1"},
              {code:"Mo6", val:"TSA Exit âœ“",           c:"#047857"},
            ]).map(d => (
              <div key={d.code} style={{display:"flex", gap:8, alignItems:"baseline", marginBottom:6}}>
                <span style={{fontSize:11, fontFamily:"monospace", fontWeight:700, color:d.c, minWidth:28}}>{d.code}</span>
                <span style={{fontSize:12, color:T.text}}>{d.val}</span>
              </div>
            ))}
          </div>
        </div>

        {/* â”€â”€ Grid area â”€â”€ */}
        <div style={{flex:1, minWidth:0}}>

          {/* View Toggle Banner */}
          <div style={{
            position:"sticky", top:59, zIndex:51,
            background:"#ffffff", borderBottom:`1px solid ${T.border}`,
            display:"flex", alignItems:"center", justifyContent:"center",
            padding:"10px 24px",
            boxShadow:"0 1px 3px rgba(0,0,0,0.05)",
          }}>
            <div style={{fontSize:12, color:T.textMuted, fontWeight:500, marginRight:16}}>Viewing:</div>
            <div style={{display:"flex", background:T.bgSidebar, borderRadius:10, padding:4, gap:3, border:`1px solid ${T.border}`}}>
              {[
                {id:"d1",  label:"âš¡ Day-1 Readiness", sublabel:"Now â†’ May 1, 2026",  activeColor:"#2563eb"},
                {id:"tsa", label:"ðŸ“‹ TSA Exit Plan",    sublabel:"May â†’ October 2026", activeColor:"#047857"},
              ].map(t => (
                <button key={t.id}
                  onClick={() => { setView(t.id); setSelected(null); stop(); setFocusLane(null); playClick(); }}
                  onMouseEnter={() => playHover()}
                  style={{
                    padding:"8px 32px", borderRadius:7, border:"none", cursor:"pointer",
                    fontFamily:"inherit", textAlign:"center",
                    background: view === t.id ? "#ffffff" : "transparent",
                    boxShadow: view === t.id ? "0 1px 6px rgba(0,0,0,0.1)" : "none",
                    borderBottom: view === t.id ? `3px solid ${t.activeColor}` : "3px solid transparent",
                    transition:"all 0.15s",
                  }}>
                  <div style={{fontSize:13, fontWeight:700, color: view === t.id ? t.activeColor : T.textMuted}}>{t.label}</div>
                  <div style={{fontSize:10, color: view === t.id ? T.textMuted : T.textFaint, marginTop:1}}>{t.sublabel}</div>
                </button>
              ))}
            </div>
          </div>

          {/* Grid */}
          <div style={{minWidth:800}}>

            {/* Phase header */}
            <div style={{
              display:"grid", gridTemplateColumns:`168px repeat(${phases.length}, 1fr)`,
              borderBottom:`1px solid ${T.border}`,
              background:T.bgPhaseHdr, position:"sticky", top:112, zIndex:50,
              boxShadow:"0 1px 3px rgba(0,0,0,0.04)",
            }}>
              <div style={{borderRight:`1px solid ${T.border}`}}/>
              {phases.map((p,i) => (
                <div key={p.id} style={{
                  padding:"10px 14px",
                  borderRight: i < phases.length-1 ? `1px solid ${T.border}` : "none",
                  borderTop:`3px solid ${p.accent}`,
                  background:`linear-gradient(180deg,${p.accent}08 0%,transparent 100%)`,
                }}>
                  <div style={{fontSize:13, fontWeight:700, color:p.accent}}>{p.label}</div>
                  <div style={{fontSize:11, color:T.textMuted, marginTop:2, fontFamily:"monospace"}}>{p.dates}</div>
                </div>
              ))}
            </div>

            {/* Lane rows */}
            {LANES.map((lane,li) => (
              <div key={lane.id} style={{
                display:"grid", gridTemplateColumns:`168px repeat(${phases.length}, 1fr)`,
                borderBottom:`1px solid ${T.border}`,
                background: li % 2 === 0 ? T.bgGrid : T.rowAlt,
                opacity: !focusLane || focusLane === lane.id ? 1 : 0.18,
                transition:"opacity 0.2s",
              }}>
                <div onClick={() => { setFocusLane(focusLane === lane.id ? null : lane.id); playClick(); }}
                  onMouseEnter={() => playHover()}
                  style={{display:"flex", alignItems:"flex-start", gap:8, padding:"14px 12px",
                    borderRight:`1px solid ${T.border}`, cursor:"pointer",
                    background:T.laneLabel, position:"sticky", left:0, zIndex:10,
                    boxShadow:"1px 0 3px rgba(0,0,0,0.04)"}}>
                  <div style={{width:3, height:28, borderRadius:2, background:lane.accent, flexShrink:0, marginTop:2}}/>
                  <div style={{fontSize:13, fontWeight:700, color:lane.accent, lineHeight:1.4}}>{lane.label}</div>
                </div>
                {phases.map((p,pi) => {
                  const cellTasks = tasks[lane.id]?.[p.id] || [];
                  return (
                    <div key={p.id} style={{padding:"9px 9px", minHeight:80,
                      borderRight: pi < phases.length-1 ? `1px solid ${T.border}` : "none",
                      display:"flex", flexDirection:"column", gap:5}}>
                      {cellTasks.map((task,ti) => {
                        const s = STATUS[task.status];
                        const isSel = selected && selected.lane === lane.id && selected.phase === p.id && selected.idx === ti;
                        const hasVO = !!task.voiceover;
                        return (
                          <div key={ti}
                            onClick={() => handleSelectTask(task, lane.id, p.id, ti)}
                            onMouseEnter={e => {
                              playHover();
                              e.currentTarget.style.background = s.bg;
                              e.currentTarget.style.borderColor = s.border;
                              e.currentTarget.style.color = s.text;
                              e.currentTarget.style.boxShadow = "0 1px 4px rgba(0,0,0,0.08)";
                              e.currentTarget.style.transform = "translateY(-1px)";
                            }}
                            onMouseLeave={e => {
                              if (!isSel) {
                                e.currentTarget.style.background = "transparent";
                                e.currentTarget.style.borderColor = T.border;
                                e.currentTarget.style.color = T.text;
                                e.currentTarget.style.boxShadow = "none";
                                e.currentTarget.style.transform = "translateY(0)";
                              }
                            }}
                            style={{
                              background: isSel ? s.bg : "transparent",
                              border:`1px solid ${isSel ? s.border : T.border}`,
                              borderRadius:5, padding:"5px 9px",
                              fontSize:12, color: isSel ? s.text : T.text,
                              cursor:"pointer", transition:"all 0.12s", lineHeight:1.4,
                              boxShadow: isSel ? "0 1px 4px rgba(0,0,0,0.08)" : "none",
                              display:"flex", alignItems:"center", justifyContent:"space-between", gap:4,
                            }}>
                            <span>{task.label}</span>
                            {hasVO && audioOn && (
                              <span title="Voiceover available" style={{fontSize:10, opacity:0.5, flexShrink:0}}>ðŸ”Š</span>
                            )}
                          </div>
                        );
                      })}
                      {cellTasks.length === 0 && (
                        <div style={{fontSize:11, color:T.textFaint, paddingTop:4}}>â€”</div>
                      )}
                    </div>
                  );
                })}
              </div>
            ))}

          </div>{/* end minWidth grid */}
        </div>{/* end grid area */}
      </div>{/* end body flex */}

      {/* â”€â”€ Detail Drawer â”€â”€ */}
      {selected && (
        <div style={{
          position:"fixed", bottom:0, left:188, right:0, zIndex:200,
          background:"#ffffff", borderTop:`2px solid ${STATUS[selected.task.status].border}`,
          padding:"16px 28px", display:"flex", alignItems:"flex-start", gap:16,
          boxShadow:"0 -4px 24px rgba(0,0,0,0.1)",
        }}>
          <div style={{flex:1}}>
            <div style={{display:"flex", alignItems:"center", gap:10, marginBottom:6}}>
              <div style={{fontSize:9, fontWeight:700, padding:"2px 7px", borderRadius:4,
                textTransform:"uppercase", letterSpacing:"0.07em",
                background:STATUS[selected.task.status].bg,
                border:`1px solid ${STATUS[selected.task.status].border}`,
                color:STATUS[selected.task.status].text}}>
                {STATUS[selected.task.status].label}
              </div>
              <div style={{fontSize:16, fontWeight:700, color:"#1e293b"}}>{selected.task.label}</div>
              {selected.task.voiceover && audioOn && (
                <div style={{display:"flex", alignItems:"center", gap:5,
                  fontSize:10, color: speaking ? "#2563eb" : T.textMuted,
                  background: speaking ? "rgba(37,99,235,0.07)" : T.bgSidebar,
                  border:`1px solid ${speaking ? "rgba(37,99,235,0.2)" : T.border}`,
                  borderRadius:5, padding:"2px 8px"}}>
                  <span>{speaking ? "â–¶" : "ðŸ”Š"}</span>
                  <span>{speaking ? "Playing voiceoverâ€¦" : "Voiceover available"}</span>
                  {speaking && (
                    <span onClick={stop} style={{marginLeft:4, cursor:"pointer", color:"#dc2626", fontWeight:700}}>â–  Stop</span>
                  )}
                  {!speaking && (
                    <span onClick={() => speak(selected.task.voiceover)} style={{marginLeft:4, cursor:"pointer", color:"#2563eb", fontWeight:700}}>â–¶ Play</span>
                  )}
                </div>
              )}
            </div>
            <div style={{fontSize:13, color:"#475569", lineHeight:1.7}}>{selected.task.detail}</div>
          </div>
          <button onClick={() => { setSelected(null); stop(); playClick(); }}
            style={{background:"#f1f5f9", border:`1px solid ${T.border}`, borderRadius:6,
              color:T.textMuted, fontSize:11, padding:"5px 12px",
              cursor:"pointer", fontFamily:"inherit", flexShrink:0}}>
            Close âœ•
          </button>
        </div>
      )}

    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
